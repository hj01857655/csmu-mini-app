# CSMU教务系统 - 部署配置检查清单

## 📋 生产环境部署前检查清单

### 🔧 API配置检查

#### ✅ 必须完成的配置更新

- [ ] **更新生产环境API地址**
  - 当前配置：`http://localhost:3000/api` （临时配置）
  - 需要更新为：`https://api.csmu.edu.cn` 或实际的生产环境API地址
  - 文件位置：`services/api.js` 第26行

- [ ] **确认HTTPS协议**
  - 生产环境必须使用HTTPS协议
  - 确保SSL证书有效
  - 检查API服务器支持HTTPS

- [ ] **验证模拟数据配置**
  - 确认生产环境 `enableMock: false`
  - 当前配置：✅ 已正确设置为 `false`

- [ ] **检查超时时间**
  - 生产环境超时时间：15000ms
  - 当前配置：✅ 已正确设置

### 🌐 网络和安全配置

#### ✅ 网络配置检查

- [ ] **API服务器可访问性**
  - 测试生产环境API服务器连通性
  - 验证网络防火墙配置
  - 确认域名解析正确

- [ ] **跨域配置**
  - 确认API服务器CORS配置
  - 验证小程序域名白名单
  - 检查请求头配置

- [ ] **认证配置**
  - 验证JWT令牌配置
  - 确认认证流程正常
  - 测试令牌刷新机制

### 📱 小程序配置

#### ✅ 小程序平台配置

- [ ] **服务器域名配置**
  - 在微信小程序后台配置request合法域名
  - 添加生产环境API域名到白名单
  - 确认uploadFile和downloadFile域名配置

- [ ] **版本信息**
  - 更新版本号
  - 更新版本描述
  - 确认发布说明

### 🔍 功能测试

#### ✅ 核心功能测试

- [ ] **用户认证**
  - 测试登录功能
  - 测试登出功能
  - 验证令牌管理

- [ ] **数据加载**
  - 测试课程表加载
  - 测试成绩查询
  - 测试考试安排
  - 测试校园通知

- [ ] **用户交互**
  - 测试页面导航
  - 测试表单提交
  - 测试数据刷新

### 📊 性能和监控

#### ✅ 性能优化

- [ ] **加载性能**
  - 测试首屏加载时间
  - 验证图片资源优化
  - 检查代码包大小

- [ ] **错误监控**
  - 配置错误收集
  - 设置性能监控
  - 建立日志系统

### 🔒 安全检查

#### ✅ 安全配置

- [ ] **数据加密**
  - 验证敏感数据加密
  - 确认本地存储安全
  - 检查传输加密

- [ ] **权限控制**
  - 验证用户权限管理
  - 确认数据访问控制
  - 测试安全边界

## 🚀 部署步骤

### 1. 配置更新

```javascript
// 在 services/api.js 中更新生产环境配置
production: {
    baseURL: 'https://api.csmu.edu.cn', // 更新为真实API地址
    timeout: 15000,
    enableMock: false
}
```

### 2. 构建和测试

```bash
# 构建生产版本
npm run build:mp-weixin

# 运行测试
npm run test

# 检查代码质量
npm run lint
```

### 3. 部署验证

- 在开发者工具中测试生产版本
- 验证所有功能正常工作
- 检查控制台无错误信息

### 4. 发布流程

- 上传代码到微信小程序后台
- 提交审核
- 发布上线

## ⚠️ 重要提醒

### 当前临时配置说明

**当前状态：** 生产环境API地址设置为 `http://localhost:3000/api`

**原因：** 这是开发阶段的临时配置，便于开发和测试

**必须操作：** 正式部署前必须更新为真实的生产环境API地址

### 配置验证工具

项目已集成配置验证工具，会在启动时自动检查配置：

- ✅ 开发环境：显示配置信息
- ⚠️ 生产环境：显示警告和建议
- 🚨 错误配置：显示错误提示

### 联系信息

如有配置问题，请联系：
- 技术负责人：[技术负责人联系方式]
- 运维团队：[运维团队联系方式]
- 项目经理：[项目经理联系方式]

---

**最后更新：** 2025年6月16日  
**文档版本：** v1.0  
**项目版本：** CSMU教务系统 v1.0
