# 更新日志 (Changelog)

本文档记录了CSMU教务系统小程序的所有重要更改。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [未发布]

### 计划中的功能
- [ ] 推送通知功能
- [ ] 离线数据缓存
- [ ] 多语言支持
- [ ] 深色模式主题
- [ ] 数据导出功能

## [1.0.0] - 2025-06-16

### 🎉 项目初始化
这是CSMU教务系统小程序的首个正式版本，包含完整的教务管理功能。

### ✨ 新增功能

#### 用户认证系统
- **双模式登录**：支持学生和教师两种登录模式
- **安全认证**：实现密码加密存储和安全验证
- **记住密码**：支持安全的密码记忆功能
- **登录历史**：智能保存最近3-5个登录账户
- **自动登录**：安全的自动登录机制

#### 课程管理模块
- **课程表查看**：清晰的周视图课程表展示
- **周次切换**：支持20周的学期周次切换
- **时间标准化**：统一50分钟/节的课程时间制
- **实时更新**：智能周次计算，自动识别当前周次
- **课程详情**：详细的课程信息弹窗展示

#### 成绩查询系统
- **多学期查询**：支持查看不同学期的成绩
- **成绩统计**：提供GPA计算和成绩分析
- **详细信息**：显示课程成绩、学分、绩点等信息

#### 个人中心
- **信息管理**：个人资料查看和基本信息展示
- **密码修改**：安全的密码修改功能
- **系统设置**：个性化设置选项
- **头像管理**：用户头像显示和管理

#### 教学评价系统
- **课程评教**：完整的课程评价功能
- **评价表单**：多维度的评价指标
- **评价历史**：查看历史评价记录
- **匿名保护**：保护用户隐私的评价机制

#### 校园服务
- **通知公告**：校园重要通知的展示
- **考试安排**：考试时间和地点查询
- **选课系统**：在线选课功能
- **学期信息**：学期安排和重要时间节点

### 🛠️ 技术特性

#### 核心架构
- **uni-app框架**：基于Vue.js的跨平台开发框架
- **模块化设计**：清晰的代码组织结构
- **响应式布局**：适配不同屏幕尺寸的设备
- **组件化开发**：可复用的UI组件库

#### 工具模块
- **学期计算器** (`utils/semester.js`)：智能的学期和周次计算
- **时间格式化** (`utils/date-formatter.js`)：统一的24小时制时间格式
- **课程时间管理** (`utils/course-time.js`)：标准化的课程时间处理
- **安全存储** (`utils/secure-storage.js`)：加密的本地数据存储
- **加密测试** (`utils/encryption-test.js`)：加密功能的测试工具

#### 服务层
- **认证服务** (`services/auth.js`)：用户认证和状态管理
- **API封装**：统一的网络请求处理
- **错误处理**：完善的错误处理机制

### 🔧 重要修复

#### 周次计算修复
- **问题**：周次计算在跨周边界时出现错误
- **修复**：重写周次计算算法，正确处理周一0点边界
- **影响**：确保课程表和首页显示正确的当前周次

#### 时间格式标准化
- **问题**：凌晨时间显示为"上午12:XX"造成混淆
- **修复**：统一使用24小时制时间格式
- **影响**：所有时间显示清晰明确，避免用户困惑

#### 课程时间统一
- **问题**：课程时间显示格式不一致
- **修复**：标准化为50分钟/节的时间制
- **影响**：课程表时间显示更加规范和准确

#### 加密安全优化
- **问题**：旧版加密算法可能产生无效Base64字符
- **修复**：实现新的V2加密算法，保持向后兼容
- **影响**：提高数据存储的安全性和可靠性

### 📱 页面结构

#### 主要页面 (16个)
- `pages/login/` - 登录页面
- `pages/home/` - 首页
- `pages/schedule/` - 课程表
- `pages/grades/` - 成绩查询
- `pages/profile/` - 个人中心
- `pages/exam/` - 考试安排
- `pages/course-selection/` - 选课系统
- `pages/notices/` - 校园通知
- `pages/semester-info/` - 学期信息
- `pages/evaluation/` - 教学评价
- `pages/evaluation-form/` - 评价表单
- `pages/evaluation-detail/` - 评价详情
- `pages/profile-detail/` - 个人资料
- `pages/change-password/` - 修改密码
- `pages/edit-profile/` - 编辑信息
- `pages/test-week/` - 周次测试（开发工具）

#### 演示页面 (2个)
- `pages/time-demo/` - 时间格式演示
- `pages/test-week/` - 周次计算测试

### 🔒 安全特性

#### 数据保护
- **加密存储**：用户凭据和敏感数据加密存储
- **自动清理**：30天自动清理过期数据
- **完整性验证**：数据完整性检查机制
- **版本兼容**：新旧数据格式的兼容处理

#### 隐私保护
- **最小化存储**：只存储必要的用户数据
- **用户控制**：用户可随时清除本地数据
- **匿名评价**：教学评价保护用户隐私

### 📊 性能优化

#### 缓存机制
- **周次信息缓存**：避免重复计算周次信息
- **用户状态缓存**：优化登录状态检查
- **数据预加载**：关键数据的预加载机制

#### 用户体验
- **加载状态**：完善的加载状态提示
- **错误处理**：友好的错误信息展示
- **操作反馈**：及时的用户操作反馈

### 🧪 测试工具

#### 开发调试
- **周次计算测试**：验证周次计算的准确性
- **时间格式测试**：验证时间格式的正确性
- **加密功能测试**：验证加密解密的可靠性
- **性能基准测试**：1000次迭代的性能测试

### 📋 已知问题

#### 当前限制
- 暂不支持推送通知
- 暂不支持离线数据同步
- 暂不支持多语言切换
- 暂不支持深色模式

#### 兼容性
- 支持微信小程序平台
- 支持H5浏览器环境
- 支持Android/iOS App

### 🔄 迁移指南

#### 从无到有
这是项目的首个版本，无需迁移操作。

#### 数据格式
- 用户数据：采用加密存储格式
- 时间格式：统一使用24小时制
- 课程时间：标准50分钟/节格式

### 👥 贡献者

- **hj01857655** - 项目创建者和主要开发者
- **CSMU Development Team** - 项目开发团队

### 📞 支持信息

- **项目仓库**：https://github.com/hj01857655/csmu-mini-app
- **问题反馈**：https://github.com/hj01857655/csmu-mini-app/issues
- **邮箱支持**：1292548381@qq.com

---

## 版本说明

### 版本号规则
本项目采用语义化版本控制：

- **主版本号**：不兼容的API修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正

### 发布周期
- **主版本**：重大功能更新或架构变更
- **次版本**：新功能添加或重要优化
- **修订版本**：Bug修复和小幅改进

### 支持政策
- **当前版本**：持续维护和更新
- **前一版本**：安全更新和重要Bug修复
- **更早版本**：不再提供支持

---

**文档最后更新**：2025年6月16日  
**当前版本**：v1.0.0
